[build]
  # 1. Build Command: Executes the "vite build" script from package.json
  command = "npm run build"
  
  # 2. Publish Directory: Tells Netlify to serve files from the output folder
  publish = "dist"

[functions]
  # 3. Functions Directory: Explicitly set to the default location.
  # This avoids the conflict caused by setting it to a file path previously.
  directory = "netlify/functions" 

# 4. SPA Routing Fix (Redirects)
# This is the most crucial part for BrowserRouter. It tells Netlify:
# "For any path that doesn't match an existing file, serve /index.html 
# but keep the original URL."
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

# Optional: Environment variable configuration. While we set the 'base' in vite.config.ts,
# this is a robust way to ensure environment variables are available during the build.
[context.production.environment]
  NODE_VERSION = "20" # Use a modern, stable Node version
